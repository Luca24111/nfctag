{% extends 'base.html.twig' %}

{% block title %}Prodotto Creato{% endblock %}

{% block body %}
<style>
  body {
    background: var(--bg-primary);
    color: var(--text-primary);
    font-family: 'SF Pro Text', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    margin: 0;
    padding: 0;
    letter-spacing: -0.04em;
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .success-container {
    max-width: 520px;
    width: 100%;
    padding: 1.25rem;
    text-align: center;
  }

  /* Card principale */
  .success-card {
    background: var(--bg-secondary);
    border-radius: 18px;
    padding: 1.5rem;
    border: 1px solid var(--border-color);
    box-shadow: 0 12px 28px var(--shadow-color);
    position: relative;
    overflow: hidden;
  }

  .success-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, #34c759, #30d158, #34c759);
  }

  /* Icona di successo animata */
  .success-icon {
    width: 60px;
    height: 60px;
    background: linear-gradient(135deg, #34c759 0%, #30d158 100%);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 1rem auto;
    font-size: 1.8rem;
    color: white;
    animation: successPulse 2s ease-in-out infinite;
    box-shadow: 0 6px 18px rgba(52, 199, 89, 0.3);
  }

  @keyframes successPulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
  }

  /* Titolo */
  .success-title {
    font-size: 1.6rem;
    font-weight: 700;
    color: var(--text-primary);
    margin: 0 0 0.5rem 0;
  }

  .success-subtitle {
    font-size: 0.95rem;
    color: var(--text-secondary);
    margin: 0 0 1.25rem 0;
    font-weight: 400;
  }

  /* Sezione immagine */
  .image-section {
    margin: 0.75rem 0 1rem 0;
    padding: 1rem;
    background: var(--bg-tertiary);
    border-radius: 14px;
    border: 1px solid var(--border-color);
  }

  .product-image {
    width: 160px;
    height: 160px;
    object-fit: cover;
    border-radius: 16px;
    box-shadow: 0 6px 16px var(--shadow-color);
    margin: 0 auto 1.5rem auto;
    display: block;
    border: 1px solid var(--border-color);
  }

  .image-placeholder {
    width: 160px;
    height: 160px;
    background: var(--bg-secondary);
    border-radius: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 1.5rem auto;
    border: 1px solid var(--border-color);
    color: var(--text-secondary);
    font-size: 2rem;
  }

  /* Dettagli prodotto */
  .product-details {
    display: grid;
    gap: 0.5rem;
    margin: 0.75rem 0 0.5rem 0;
    text-align: left;
  }

  .detail-item {
    background: var(--bg-tertiary);
    border-radius: 10px;
    padding: 0.6rem 0.9rem;
    border: 1px solid var(--border-color);
    display: flex;
    align-items: center;
    gap: 0.75rem;
  }

  .detail-icon {
    width: 32px;
    height: 32px;
    background: var(--bg-secondary);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--accent-color);
    font-size: 1rem;
  }

  .detail-content {
    flex: 1;
  }

  .detail-label {
    font-size: 0.8rem;
    color: var(--text-secondary);
    margin: 0 0 0.1rem 0;
    font-weight: 500;
  }

  .detail-value {
    font-size: 0.95rem;
    color: var(--text-primary);
    margin: 0;
    font-weight: 600;
  }

  /* Pulsanti azione */
  .action-buttons {
    display: flex;
    gap: 0.75rem;
    justify-content: center;
    margin-top: 1rem;
    flex-wrap: wrap;
  }

  .action-btn {
    background: linear-gradient(135deg, var(--accent-color) 0%, var(--accent-hover) 100%);
    color: white;
    border: none;
    border-radius: 10px;
    padding: 0.7rem 1.2rem;
    font-size: 0.95rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    box-shadow: 0 4px 15px rgba(0, 122, 255, 0.3);
  }

  .action-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 122, 255, 0.4);
  }

  .action-btn.secondary {
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    color: var(--text-primary);
  }

  .action-btn.secondary:hover {
    background: rgba(255, 255, 255, 0.15);
    border-color: rgba(255, 255, 255, 0.3);
  }

  /* Animazioni di entrata */
  .success-card {
    animation: slideInUp 0.6s ease-out;
  }

  @keyframes slideInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .success-icon {
    animation: successPulse 2s ease-in-out infinite, fadeInScale 0.8s ease-out 0.2s both;
  }

  @keyframes fadeInScale {
    from {
      opacity: 0;
      transform: scale(0.8);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  /* Responsive */
  @media (max-width: 768px) {
    .success-container {
      padding: 1rem;
    }

    .success-card { padding: 1rem; }

    .success-title {
      font-size: 2rem;
    }

    .product-image,
    .image-placeholder { width: 140px; height: 140px; }

    .action-buttons {
      flex-direction: column;
      align-items: center;
    }

    .action-btn { width: 100%; max-width: 280px; justify-content: center; }
  }

  @media (max-width: 480px) {
    .success-title {
      font-size: 1.8rem;
    }

    .success-subtitle {
      font-size: 1rem;
    }

    .product-image,
    .image-placeholder {
      width: 120px;
      height: 120px;
    }

    .detail-item {
      padding: 0.75rem 1rem;
    }
  }
</style>

<div class="success-container">
  <div class="success-card">
    <!-- Icona di successo -->
    <div class="success-icon">
      <i class="fas fa-check"></i>
    </div>

    <!-- Titolo e sottotitolo -->
    <h1 class="success-title">Prodotto Creato!</h1>
    <p class="success-subtitle">Il tuo prodotto Ã¨ stato aggiunto con successo al magazzino</p>

    <!-- Sezione immagine -->
    {% if immagine %}
      {% set normalized = immagine starts with('/') ? immagine|slice(1) : immagine %}
      <div class="image-section">
        <img src="{{ asset(normalized starts with('uploads/') ? normalized : 'uploads/images/' ~ normalized) }}" alt="Immagine prodotto" class="product-image">
        <p style="color: var(--text-secondary); margin: 0; font-size: 0.85rem;">Immagine del prodotto</p>
      </div>
    {% else %}
      <div class="image-section">
        <div class="image-placeholder">
          <i class="fas fa-image"></i>
        </div>
        <p style="color: var(--text-secondary); margin: 0; font-size: 0.85rem;">Nessuna immagine</p>
      </div>
    {% endif %}

    <!-- Dettagli prodotto -->
    <div class="product-details">
      {% if nome %}
        <div class="detail-item">
          <div class="detail-icon">
            <i class="fas fa-tag"></i>
          </div>
          <div class="detail-content">
            <div class="detail-label">Nome Prodotto</div>
            <div class="detail-value">{{ nome }}</div>
          </div>
        </div>
      {% endif %}

      {% if descrizione %}
        <div class="detail-item">
          <div class="detail-icon">
            <i class="fas fa-align-left"></i>
          </div>
          <div class="detail-content">
            <div class="detail-label">Descrizione</div>
            <div class="detail-value">{{ descrizione }}</div>
          </div>
        </div>
      {% endif %}

      {% if posizione %}
        <div class="detail-item">
          <div class="detail-icon">
            <i class="fas fa-box"></i>
          </div>
          <div class="detail-content">
            <div class="detail-label">Posizione Scaffale</div>
            <div class="detail-value">{{ posizione }}</div>
          </div>
        </div>
      {% endif %}
    </div>

    <!-- Pulsanti azione -->
    <div class="action-buttons">
      <a href="{{ path('app_home') }}" class="action-btn">
        <i class="fas fa-list"></i>
        Tutti i Prodotti
      </a>
      <a href="{{ path('app_nfc') }}" class="action-btn secondary">
        <i class="fas fa-plus"></i>
        Aggiungi Altro
      </a>
    </div>
  </div>
</div>
{% endblock %}